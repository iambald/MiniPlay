<html ng-app='app'>
<head>
  <link rel="stylesheet" href="styles/fonts.css" >
  <link rel="stylesheet" href="styles/material.red-blue.min.css" />
  <link rel='stylesheet' href='styles/popup.css'>

  <script src='scripts/jquery.js'></script>
  <script src='scripts/angular.min.js'></script>
  <script src='scripts/enums.js'></script>
  <script src='scripts/popup.js'></script>
  <script src='scripts/controllers.js'></script>
  <script src='scripts/directives.js'></script>
</head>
<body ng-controller='PopupController' ng-mouseup='status.slider_dragging = false'>

  <div id='popup' class='mdl-layout mdl-layout--fixed-header'>
    <header class='mdl-layout__header' ng-click='status.displayed_content=""'>
      <div class="mdl-layout__drawer-button" ng-click="menu_icon_click()"><i class="material-icons">{{menu_icon()}}</i></div>
      <div id='song-info' class='mdl-layout-title'>
        <div id='title' ng-style='{"text-transform": status.displayed_content == "" ? "none" : "capitalize"}'>{{status.displayed_content == "" || status.displayed_content == "current_playlist" ? music_status.title : data.title}}</div>
        <div id='subtitle' ng-style='{"display": music_status.state == StateEnum.PLAYING && status.displayed_content == "" ? "block": "none"}'>{{music_status.artist}} - {{music_status.album}}</div>
      </div>
    </header>
    <div class="mdl-layout__drawer">
      <span class="mdl-layout-title" ng-click='drawer_click("library")'>MiniPlay</span>
      <nav class="mdl-navigation">
        <form class='search' ng-submit='search()'>
          <div class="mdl-textfield mdl-js-textfield">
            <label class="mdl-button mdl-js-button mdl-button--icon" for="search">
              <i class="material-icons">search</i>
            </label>
            <input class="mdl-textfield__input" autocomplete="off" ng-model='data.query' type="text" id="search">
            <label class="mdl-textfield__label" for="search">Search...</label>
          </div>
        </form>
        <a class="mdl-navigation__link" href="" ng-click='drawer_click("get_recent")'>Recent</a>
        <a class="mdl-navigation__link" href="" ng-click='drawer_click("get_playlists")'>Playlists</a>
        <a class="mdl-navigation__link" href="" ng-click='drawer_click("get_stations")'>Stations</a>
        <a class="mdl-navigation__link" href="" ng-click='drawer_click("get_artists")'>Artists</a>
        <a class="mdl-navigation__link" href="" ng-click='drawer_click("get_albums")'>Albums</a>
        <a class="mdl-navigation__link" href="" ng-click='settings_click($event)'>Settings</a>
      </nav>
    </div>
    <div class='album-art' ng-style='{"background-image":album_art_background(), "display": should_show_art() ? "block" : "none"}' ng-click='album_art_click()'>
      <div id='art-controls'>
        <i mp-control id='repeat' class='material-icons' ng-class='{"top-control-active": music_status.repeat != RepeatEnum.NONE}' ng-disabled='music_status.state != StateEnum.PLAYING || music_status.disabled.repeat' title='Repeat songs'>{{repeat_icon()}}</i>
        <i mp-control id='shuffle' class='material-icons' ng-class='{"top-control-active": music_status.shuffle == true}' ng-disabled='music_status.state != StateEnum.PLAYING || music_status.disabled.shuffle' title='Shuffle songs' ng-click='music_status.shuffle=!music_status.shuffle'>shuffle</i>
      </div>
    </div>
    <div id='list-content' ng-switch='status.displayed_content' infinite-scroll='scroll_data(status.displayed_content)' infinite-scroll-disabled='should_disable_scroll()' infinite-scroll-distance='5'>
      <div ng-switch-when='playlist'>
        <div id='playlist' ng-include src='"templates/playlist.html"'></div>
      </div>
      <div ng-switch-when='current_playlist'>
        <div id='current_playlist' ng-include src='"templates/current_playlist.html"'></div>
      </div>
      <div ng-switch-when='playlists'>
        <div id='playlists' ng-include src='"templates/playlists.html"'></div>
      </div>
      <div ng-switch-when='loading'>
        <div id='loading' ng-include src='"templates/loading.html"'></div>
      </div>
      <div ng-switch-when='recent'>
        <div id='recents' ng-include src='"templates/recents.html"'></div>
      </div>
      <div ng-switch-when='stations'>
        <div id='stations' ng-include src='"templates/stations.html"'></div>
      </div>
      <div ng-switch-when='artists'>
        <div id='artists' ng-include src='"templates/artists.html"'></div>
      </div>
      <div ng-switch-when='artist'>
        <div id='artist' ng-include src='"templates/artist.html"'></div>
      </div>
      <div ng-switch-when='albums'>
        <div id='albums' ng-include src='"templates/albums.html"'></div>
      </div>
      <div ng-switch-when='search'>
        <div id='search' ng-include src='"templates/search.html"'></div>
      </div>
      <div id='list-none' ng-switch-default></div>
    </div>

    <div id='controls'>
      <p id='slider-wrapper'>
        <input class='mp-slider mdl-slider mdl-js-slider' type='range' min='0' max='{{music_status.total_time_s}}' value='{{music_status.current_time_s}}' ng-mousedown='status.slider_dragging = true' tabindex="-1" />
      </p>
      <div id='current-time' ng-disabled='music_status.state != StateEnum.PLAYING'>{{music_status.current_time}}</div>
      <div id='total-time' ng-disabled='music_status.state != StateEnum.PLAYING'>{{music_status.total_time}}</div>
      <div id='controls-left' ng-include src='"templates/controls-left.html"'></div>
      <div id='controls-right' ng-include src='"templates/controls-right.html"'></div>

    </div>

    <div class='mdl-layout__obfuscator' ng-click='close_drawer()'></div>
  </div>

  <script src="scripts/material.min.js"></script>
</body>
</html>
