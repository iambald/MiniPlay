<html ng-app='app'>
<head>
  <link href='http://fonts.googleapis.com/css?family=Roboto:300' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.0/material.deep_orange-indigo.min.css" />
  <link rel='stylesheet' type='text/css' href='styles/popup.css'>

  <script src='scripts/angular.min.js'></script>
  <script src='scripts/jquery.js'></script>
  <script src='scripts/popup.js'></script>

</head>
<body>

  <div id='popup' ng-controller='PopupController'>
    <div id='album-art' ng-style='{"background-image":album_art_background()}'>
      <div id='song-info'>
        <div id='title'>{{title}}</div>
        <div id='artist'>{{artist}}</div>
        <div id='album'>{{album}}</div>
      </div>
      <ul id='top-controls'>
        <li id='shuffle' class='top-control' ng-class='{"top-control-active": shuffle == true}' ng-disabled='state < 2 || disabled.shuffle' title='Shuffle songs' tabIndex='-1'>
          <i class="material-icons">shuffle</i>
        </li>
        <li id='repeat' class='top-control' ng-class='{"top-control-active": repeat > 0}' ng-disabled='state < 2 || disabled.repeat' title='Repeat songs' tabIndex='-1'>
          <i class="material-icons">{{repeat_icon()}}</i>
        </li>
        <li id='settings' class='top-control' ng-disabled='state < 2' title='Settings' tabIndex='-1'>
          <i class='material-icons'>settings</i>
        </li>
      </ul>
        <div id='current-time' ng-disabled='state < 2'>{{current_time}}</div>
        <div id='total-time' ng-disabled='state < 2'>{{total_time}}</div>
    </div>
    <div id='playlist' ng-style='{"display" : playlist_pressed ? "flex" : "none"}'>
      <table class='mdl-data-table mdl-js-data-table' id='playlist-table'>
        <thead>
          <tr>
            <th id='song_header' class='mdl-data-table__cell--non-numeric'>Song</th>
            <th>
              <i id='schedule_icon' class="material-icons">schedule</i>
            </th>
            <th>
              <i class='material-icons'>music_note</i>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr class='song-row' ng-repeat='song in playlist' ng-click='playlist_click(song.index)'>
            <td class='song-details-span mdl-data-table__cell--non-numeric'>
              <span class='song-info'>
                <img class='small-art' ng-src='{{song.album_art}}'/>
                <div class='song-details'>
                  <div class='song-title'>{{song.title}}</div>
                  <div class='song-artist-album'>{{song.artist}} - {{song.album}}</div>
                </div>
              </span>
            </td>
            <td class='duration'>
              <span>{{song.total_time}}</span>
            </td>
            <td class='play-count'>
              <span>{{song.play_count}}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <p id='slider-wrapper'>
      <input id='slider' class='mdl-slider mdl-js-slider' type='range' min='0' max='{{total_time_s}}' value='{{current_time_s}}' tabindex='-1' />
    </p>
    <div id='controls'>
      <div id='controls-left'>
        <button id='rew' class='mdl-button mdl-js-button mdl-button--icon control' ng-disabled='state < 2 || disabled.rew' title='Previous song' tabIndex='-1' >
          <i class="material-icons">skip_previous</i>
        </button>
        <button id='play' class='mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--primary control' ng-disabled='state < 2 || disabled.play' ng-attr-title='{{status_title()}}' tabIndex='0' >
          <i class="material-icons">{{status}}</i>
        </button>
        <button id='ff' class='mdl-button mdl-js-button mdl-button--icon control' ng-disabled='state < 2 || disabled.ff' title='Next song' tabIndex='-1' >
          <i class="material-icons">skip_next</i>
        </button>
      </div>
      <div id='controls-right'>
        <button id='up' class='mdl-button mdl-js-button mdl-button--icon control thumb' ng-class='{"mdl-button--colored": thumb == "5"}' ng-disabled='state < 2 || disabled.up' title='Thumbs up' tabIndex='-1' ng-style='{"display": vol_pressed ? "none" : "block"}'>
          <i class="material-icons">thumb_up</i>
        </button>
        <button id='down' class='mdl-button mdl-js-button mdl-button--icon control thumb' ng-class='{"mdl-button--colored": thumb == "1"}' ng-disabled='state < 2 || disabled.down' title='Thumbs down' tabIndex='-1' ng-style='{"display": vol_pressed ? "none" : "block"}'>
          <i class="material-icons">thumb_down</i>
        </button>
        <button id='vol' class='mdl-button mdl-js-button mdl-button--icon control' ng-disabled='state < 2 || disabled.vslider' title='Volume' tabindex='-1' ng-click='vol_pressed=!vol_pressed'>
          <i class='material-icons'>{{volume_icon()}}</i>
        </button>
        <p id='vol-wrapper' ng-style='{"display": vol_pressed ? "block" : "none"}'>
          <input id='vol-slider' class='mdl-slider mdl-js-slider' type='range' min='0' max='100' value='100' tabindex='-1' disabled />
        </p>
        <button id='vol-up' class='mdl-button mdl-js-button mdl-button--icon control' ng-disabled='state < 2 || disabled.vol' title='Volume' tabindex='-1' ng-click='vol_pressed=!vol_pressed' ng-style='{"display": vol_pressed ? "block" : "none"}'>
          <i class='material-icons'>volume_up</i>
        </button>
        <button id='playlist-button' class='mdl-button mdl-js-button mdl-button--icon control' ng-disabled='state < 2 || disabled.playlist' title='Playlist' tabindex='-1' ng-click='playlist_pressed=!playlist_pressed' ng-style='{"display": vol_pressed ? "none" : "block"}'>
          <i class='material-icons'>queue_music</i>
        </button>
      </div>
    </div>
  </div>

  <script src="scripts/material.min.js"></script>
</body>
</html>
